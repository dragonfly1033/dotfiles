#!/bin/sh

arg=$1
val=$2
count=$(cat $HOME/bin/.env/PENDING |
			sed '/^'"$val"'/ !d'|
			wc -l)
		
if   [ $arg == "start" ] || [ $arg == "add" ];  then
	echo "$val""_""$count" >> $HOME/bin/.env/PENDING
	polybar-msg action pending hook 0
elif [ $arg == "end" ] || [ $arg == "remove" ];   then
	sed -i '/^'"$val"'/ d' $HOME/bin/.env/PENDING
	polybar-msg action pending hook 0
elif [ $arg == "get" ]; then
	data=$(cat bin/.env/PENDING | tr '\n' '`' | sed 's/`/ | /g' | sed 's/...$//')
	echo "$data"
else
	echo "Usage: "
	echo "		 pending [start|add] <text>"
	echo "		 pending [end|remove] <text> [count]"
	echo "		 pending get"
fi
