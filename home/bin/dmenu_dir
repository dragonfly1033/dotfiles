#!/bin/sh

DIR=$1

if [ -z $DIR ]; then
	echo "Usage: dmenu_dir <dir>"
	exit
fi

ddmenu=$HOME/bin/dmenu
go=true

while $go; do
	OPT=$(ls -1 "$DIR")
	CHO=$($ddmenu ".\n$OPT" "Select:")
	if [ $CHO == "." ]; then
		go=false
		END=$DIR
	elif [ ! -d $DIR/$CHO ]; then
		go=false
		END=$DIR/$CHO
	elif [ -z $CHO ]; then
		echo 'NONE'
		exit
	fi
	DIR=$DIR/$CHO
done

echo $END
